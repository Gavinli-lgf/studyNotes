# 基于预瞄的智能车辆路径跟踪控制研究
倪兰青,林,王凯正

## 前言：
* 当前路径跟踪控制算法主要有模糊控制、滑模控制策略、单点预瞄策略、模型预测控制、最优控制等
  1. 模糊控制：汪伟, 赵又群, 许健雄,等. 基于模糊控制的汽车路径跟踪研究[ J ] . 中国机械工程, 2 0 1 4 
  2. 滑模控制策略：JIA Heming,WANG Jiapeng,GUO Jing.Adaptiv es
  3. 单点预瞄策略：...
  4. 模型预测控制：...
  5. 最优控制：...
## 1 路径跟踪模型
* 本文首先建立3个模型：横向预瞄误差模型、路径跟踪误差模型、线性二自由度车辆动力学模型；并将横向预瞄误差模型、二自由度车辆动力学模型结合。
  1. 横向预瞄误差模型: 车辆质心与期望路径道路中心线之间的横向偏差e。Φr 为车身纵轴与道路中心线之间的夹角,由于Φr 很小，设sinΦr≈Φr（**此假设有些不合理，因为既要默认发车位置与routing线平行，又要假设运行过程中车辆跟踪效果一直不错，不会出现大的偏差。**）。最终得出横向预瞄误差模型为e<sub>p</sup> = e + LΦr。
  2. 路径跟踪误差模型: 车身纵轴和道路中心线切线的夹角的二阶导数的计算（**直接将道路heading的二阶导数认为0，有些不合适吧**）最终得到的路径跟踪误差模型，时关于[Vy Vy_dot Φ_dot Φ_dot_dot]的。
  3. 线性二自由度车辆动力学模型: 
（1）**图3中Fyf、Fyr的标注错误，应该沿y方向，而不是垂直于车轮平面的。因此式(19)也不对。**
（2）状态变量x依然是向量[横向误差  横向误差变化率  朝向误差  朝向误差变化率]，与其他方法不同的是，这四个量的选取都是针对预瞄点的。**而预瞄点的选取，就是在车辆y轴方向上，延伸出固定长度L。**
## 2 LQR控制器设计
* 性能指标函数J（又叫目标函数）引入了“误差积分项”、“控制积分项”两个概念；
  1. "误差积分项" 1/2[xT(t)Qx(t)]是工作过程中动态跟踪误差的积累和,表示x(t)偏离理想状态的总度量。
  2. 加权矩阵Q反映了对各状态向量的各个分量的重视程度。（与调参过程相对应，某个q越大，对某个误差分量要求越严格，要求越小。）
  3. 控制积分项1/2[uT(t)Ru(t)]表示系统在整个控制过程中所消耗的控制能量,反映了控制的代价。
  4. R反映了对控制量的各个分量的不同加权.
  5. 整个代价函数J表示系统整体的性能指标，性能指标最小表示用不大的控制量来保持较小的误差,以达到能量消耗、动态误差的综合最优。
* 根据系统状体空间方程,因为rank[B,AB]=4 ,因此系统可控,则最优控制器u(t)可设计为2部分： 状态反馈增益矩阵、扰动前馈增益矩阵。
* P为如下黎卡提代数方程的正定解，S为如下方程的解。求出S、P，即可求出最优控制器u(t)。
## 3 仿真结果与分析
* 先假设参考路径为一个换道路径，满足2个条件，模型如下：
  1. 在换道过程中,道路曲率不会发生突变,从而保证车辆转角不会突变。
  2. 在换道的起点和终点位置处,换道曲线曲率为 0 。
  3. 选用的换道模型为一个（x,y）的函数，函数参数与换道时的横向位移c、纵向位移d有关。
* 仿真结果（结果分析与评价标准）
  1. 质心侧偏角：表明车辆侧滑大小；逆时针方向为负，顺时针方向为正；正弦波形式，先负后正，绝对值在0.6度以内，表明车辆侧滑小。
  2. 横摆角速度：横摆角速度的跟踪性能，体现了车辆的行驶稳定性；角速度根据右手定则判定，朝上为正，朝下为负；正弦波形式，先正后负，误差绝对值在0.01。
  3. 前后轮转角：**图是错的，文字描述没问题：正负定义与“质心测偏角不同，且汽车前轮转角小于后轮转角也是不对的”**
  4. 横向偏差：sl坐标系水平防止，s朝右为正，l朝上为正；因此横向偏差呈正弦形状，先负后正；绝对值限制在0.08范围内；
  5. 方位偏差：**图是错的，正负定义与“质心测偏角不同”**
## 4 结束语
* 车辆在实际路径跟踪过程中,控制目的通常为减小前方可视范围内某点与期望路径道路中心线之间横向误差的大小,并非车辆质心与期望路径中心线之间的横向误差。
  1. **本篇论文讨论的是用lqr，控制车辆预瞄点（像是固定在车辆纵轴上一个长为L的钢管的端点）、轨迹上与预瞄点最近点，这两者之间的横向、朝向误差；**
  2. **Neolix中用lqr控制的是车辆质心、轨迹上预瞄点，这两者之间的横向、朝向误差；**
  3. **这与汉鹏、学亮说的，用lqr控制车辆质心、轨迹上与车量质心最近点，这两者之间的横向、朝向误差不同。**




















 


































