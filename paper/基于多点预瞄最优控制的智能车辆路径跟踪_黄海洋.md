# [基于多点预瞄最优控制的智能车辆路径跟踪](https://mp.weixin.qq.com/s?__biz=MzI1ODYwOTkzNg==&mid=2247492889&idx=1&sn=2b32137f94114fd3996176a3ce78a3ff&chksm=ea072366dd70aa70cb2f227ded168ca083023489613153908b633aa75d97b5a797b3c6e27406&mpshare=1&scene=1&srcid=0107jtWtJicJ7g1J9fpo6SfI#rd)

## 摘要
* 嵌入式控制器开发环境 + 车辆动力学模型 + 多点道路预瞄(单点道路预瞄)；
* 目标函数(预瞄窗口内的跟踪偏差) + 最优控制(lqr)；
* 通过离线计算最优增益的方法，提高算法实时性

## 1. 前言
* LQR 方法不考虑预瞄，或仅预瞄前方1个目标路径，易出现跟踪偏差较大问题；MPC 方法需要消耗大量计算资源，在车辆嵌入式控制器的计算环境中难以实现。因此多点预瞄lqr，既能够综合考虑前方路径特征，又不需要在线优化求解占用大量计算 资源，具有较强的嵌入式环境实车应用价值。
* 此多点lqr预瞄方法是基于如下论文更改的：[8] Sharp R S, Valtetsiotis V. Optimal Preview Car Steering Control[J]. Vehicle System Dynamics, 2001, 35(1):101-117.

## 2. 车辆及道路预瞄模型
### 2.1 车辆动力学模型
* 根据车辆运动学，建立前轮转角δ与前后轮胎测偏角αf、αr之间的关系；**方程中的车辆横向位置y，是局部直角坐标系下的，而不是sl坐标系下的。该局部直角坐标系，可以是车身坐标系，也可以是odometry坐标系，具体以实际需求而定。**
* 根据牛顿第二定律进行侧向力和横摆力矩分析，建立等式；
* 定义状态向量X为[y_err, y_err_dot, Φ_err, Φ_err_dot]，输入向量为[δ]。建立状态空间方程。
* 状态空间方程离散化。
* 由此状态方程即可确定车辆在一定速度下转向盘转角作为控制量，对车辆横向位置及横摆角速度状态产生的影响。
### 2.2 道路预瞄模型

## 3. LQR最优预瞄控制


## 4. 仿真及实车验证
### 4.1 仿真结果
### 4.2 实车验证


## 5. 必须读的参考文献：
1. [Optimal Preview Car Steering Control _ Sharp R S](https://books.google.com.hk/books?hl=zh-TW&lr=&id=B42t4X1yV8UC&oi=fnd&pg=PA101&dq=Optimal+Preview+Car+Steering+Control%5BJ%5D.+Vehicle+System+Dynamics,&ots=2-DbnOQ5FQ&sig=p8InR1S2t9yH-2NtVFNNbTJhbJo&redir_esc=y#v=onepage&q=Optimal%20Preview%20Car%20Steering%20Control%5BJ%5D.%20Vehicle%20System%20Dynamics%2C&f=false)


## 论文参考文献
[1] Snider J M. Automatic Steering Methods for Autonomous Automobile Path Tracking[J]. Robotics Institute, 2009.
[2] 张琨. 智能汽车自主循迹控制策略研究[D]. 哈尔滨工业大学, 2013.
[3] 段建民, 田晓生, 夏天, 等. 基于模型预测控制的智能汽车目标路径跟踪方法研究[J]. 汽车技术, 2017(8):6-11.
[4] Amidi O, Thorpe C E. Integrated Mobile Robot Control[C]//Fibers '91, Boston, MA. International Society for Optics and Photonics, 1991:504-523.
[5] Mazzini L. The Optimal Control Theory[M]. Flexible Spacecraft Dynamics, Control and Guidance. Springer International Publishing, 2016.
[6] Camacho D E F, Bordons D C. Model Predictive Control[M].Model Predictive control. Springer London, 2007:575-615.
[7] Werling M, Ziegler J, Kammel S, et al. Optimal Trajectory Generation for Dynamic Street Scenarios in a Frenét Frame [C]// IEEE International Conference on Robotics and Automation. IEEE, 2010:987-993.
[8] Sharp R S, Valtetsiotis V. Optimal Preview Car Steering Control[J]. Vehicle System Dynamics, 2001, 35(1):101-117.
[9] 龚建伟, 姜岩, 徐威. 无人驾驶车辆模型预测控制[M]. 北京: 北京理工大学出版社, 2014.
